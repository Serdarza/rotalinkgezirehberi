<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RotaLink – Şehir Ara ve Öneri Gönder</title>
<meta name="theme-color" content="#f7faff" />
<style>
:root{
  --bg:#f7faff;--card:#fff;--text:#0f172a;--mut:#475569;--bd:#e2e8f0;
  --b1:#0ea5e9;--b2:#22d3ee;--ok:#22c55e;--go:#10b981;--warn:#f59e0b;
  --share1:#a78bfa;--share2:#f472b6
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto;scroll-behavior: smooth;}
a{text-decoration:none;color:inherit}
.container{max-width:1100px;margin:auto;padding:18px}
header{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--bd);background:#fff}
.logo{display:flex;gap:10px;align-items:center;font-weight:800}
.badge{width:30px;height:30px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--b1),var(--b2));color:#00131a}
nav{display:flex;gap:14px;color:var(--mut)}
.hero{display:grid;grid-template-columns:1fr;gap:14px;}
.card{background:var(--card);border:1px solid var(--bd);border-radius:12px;padding:16px; margin-top: 16px;}
.hero h1{margin:0 0 6px;font-size:22px}
.hero .btn-store{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:0;background:linear-gradient(135deg,var(--b1),var(--b2));color:#00131a;font-weight:800}

/* --- ARAMA BÖLÜMÜ TASARIMI --- */
.search-section {
  padding: 32px 0;
  text-align: center;
}
.search-section h2 {
  font-size: 32px;
  font-weight: 800;
  margin-top: 0;
  margin-bottom: 16px;
}
.inputwrap{
  position:relative;
  display: flex;
  align-items: center;
  max-width: 600px;
  margin: auto;
  border-radius: 28px;
  background: var(--card);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  transition: box-shadow 0.3s ease;
}
.inputwrap:focus-within {
  box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2), 0 4px 20px rgba(0,0,0,0.1);
}
.search-icon {
  position: absolute;
  left: 20px;
  color: #94a3b8;
  width: 22px;
  height: 22px;
  transition: color 0.3s;
}
.inputwrap:focus-within .search-icon { color: var(--b1); }
#q {
  width:100%;
  padding: 16px 50px 16px 56px;
  border-radius:28px;
  border:0;
  background: transparent;
  outline: none;
  font-size: 18px;
  color: var(--text);
}
#q::placeholder { color: #94a3b8; }
.clearbtn{
  position:absolute;
  right: 12px;
  top:50%;
  transform:translateY(-50%);
  border:0;
  background:#eef2f7;
  width:32px;
  height:32px;
  border-radius:50%;
  font-weight:900;
  color:#334155;
  cursor:pointer;
  display: grid;
  place-items: center;
  transition: background-color 0.2s;
}
.clearbtn:hover { background-color: #dde4ed; }

/* --- Şehir Tahmin Kutusu Stilleri --- */
#suggestions {
  display: none;
  position: absolute;
  top: calc(100% + 8px);
  left: 0; 
  right: 0;
  text-align: left;
  background: var(--card);
  border: 1px solid var(--bd);
  border-radius: 16px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  max-height: 250px;
  overflow-y: auto;
  z-index: 10;
}
.suggestion-item {
  padding: 12px 20px;
  cursor: pointer;
  font-size: 16px;
}
.suggestion-item:hover { background-color: #f1f5f9; }

/* --- Sekmeler ve İçerik Listesi --- */
.tabs{margin-top:14px;border-bottom:1px solid var(--bd);display:flex;gap:6px;flex-wrap:wrap}
.tab{padding:8px 14px;border:1px solid var(--bd);border-bottom:0;border-radius:10px 10px 0 0;background:#fff;color:#0f172a;cursor:pointer;font-weight:700}
.tab.active{background:linear-gradient(135deg,#f8fafc,#fff)}
.tabcontent{display:none;padding:12px;border:1px solid var(--bd);border-top:0;border-radius:0 0 12px 12px;background:#fff}
.tabcontent.active{display:block}
.list{display:grid;gap:10px}
.item{border:1px solid var(--bd);border-radius:10px;padding:10px;background:#fff;display:flex;align-items:center;justify-content:space-between;gap:12px}
.info{flex:1;min-width:160px;}
.title{font-weight:700;font-size:15px;}
.desc{font-size:14px; color:var(--mut); margin-top:2px; line-height:1.4;}
.actions{display:flex;gap:8px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:8px 12px;border-radius:10px;border:0;font-weight:800;font-size:14px;color:#0b1320;background:#f1f5f9}
.btn.call{background:linear-gradient(135deg,#38bdf8,#22d3ee);color:#00131a}
.btn.share{background:linear-gradient(135deg,var(--share1),var(--share2));color:#111827}
.btn.go{background:linear-gradient(135deg,#34d399,#22c55e);color:#0b1320}
.btn.view{background:linear-gradient(135deg,#fde68a,var(--warn));color:#111827}
.empty{color:var(--mut);font-size:13px}

/* --- İletişim Formu Stilleri --- */
.contact-card { padding: 24px; }
.contact-card h2 { margin-top: 0; font-size: 24px; }
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-weight: 600; margin-bottom: 6px; font-size: 15px; }
.form-group input, .form-group select, .form-group textarea {
  width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--bd);
  background: #f8fafc; font-size: 16px; font-family: inherit;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus {
  outline: none; border-color: var(--b1); background: #fff; box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.15);
}
textarea { resize: vertical; min-height: 120px; }
.btn-submit {
  width: 100%; padding: 14px; font-size: 16px; font-weight: 800;
  border: 0; border-radius: 10px; background: linear-gradient(135deg, var(--go), var(--ok));
  color: #fff; cursor: pointer; transition: opacity 0.2s;
}
.btn-submit:hover { opacity: 0.9; }
.form-info { font-size: 13px; color: var(--mut); text-align: center; margin-top: 12px; }

/* --- YENİ ALT BİLGİ (FOOTER) STİLLERİ --- */
footer{
  margin-top:32px; padding-top:14px; border-top:1px solid var(--bd);
  color:var(--mut); display:flex; justify-content:space-between;
  flex-wrap:wrap; gap:12px; align-items: center; font-size: 14px;
}
.footer-links {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    justify-content: center;
}
.footer-links a {
    transition: color 0.2s;
}
.footer-links a:hover {
    color: var(--text);
}

/* --- YENİ "YUKARI ÇIK" BUTONU STİLİ --- */
#scrollTopBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 99;
  border: none;
  outline: none;
  background-color: var(--b1);
  color: white;
  cursor: pointer;
  padding: 0;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  font-size: 24px;
  line-height: 48px; /* Dikey hizalama için */
  text-align: center;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: opacity 0.3s, visibility 0.3s, background-color 0.2s;
}
#scrollTopBtn:hover {
  background-color: var(--b2);
}

@media(max-width:640px){
  .item{flex-direction:column;align-items:flex-start}
  .actions{width:100%; margin-top: 8px;}
  footer { flex-direction: column; text-align: center; }
}
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo"><div class="badge">RL</div><span>RotaLink</span></div>
    <nav><a href="#sehirara">Şehir Ara</a><a href="#ozellikler">Özellikler</a><a href="#indir">İndir</a><a href="#iletisim">İletişim</a></nav>
  </header>

  <section class="hero card" id="ozellikler">
    <h1>RotaLink ile şehirde en doğru noktaya tek dokunuş.</h1>
    <p>Misafirhaneler, gezi noktaları, yerel yemekler ve sosyal tesisler. Arayın, <strong>Ara</strong> ile telefon edin, <strong>Paylaş</strong> ile link gönderin, <strong>Git</strong> ile haritada açın.</p>
    <a class="btn-store" id="indir" href="https://play.google.com/store/apps/details?id=com.serdarza.rotalink" target="_blank" rel="noopener">Google Play’den indir</a>
  </section>

  <section class="search-section" id="sehirara">
    <h2>Şehir Ara</h2>
    <div class="inputwrap">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6.007,6.007,0,0,0,10,4Z"/><path d="M21,22a1,1,0,0,1-.707-0.293l-4-4a1,1,0,0,1,1.414-1.414l4,4A1,1,0,0,1,21,22Z"/></svg>
        <input id="q" placeholder="İstediğiniz şehri yazın..." autocomplete="off" />
        <button class="clearbtn" id="clearBtn" title="Temizle">×</button>
        <div id="suggestions"></div>
    </div>
  </section>
  
  <div class="tabs" id="tabs" style="display:none">
    <div class="tab" data-tab="tesis">Tesis</div>
    <div class="tab" data-tab="gezi">Gezi</div>
    <div class="tab" data-tab="yemek">Yemek</div>
    <div class="tab" data-tab="sosyal">Sosyal</div>
  </div>
  <div class="tabcontent" id="tab-tesis"><div class="empty">Sonuç yok.</div></div>
  <div class="tabcontent" id="tab-gezi"><div class="empty">Sonuç yok.</div></div>
  <div class="tabcontent" id="tab-yemek"><div class="empty">Sonuç yok.</div></div>
  <div class="tabcontent" id="tab-sosyal"><div class="empty">Sonuç yok.</div></div>

  <section class="card contact-card" id="iletisim">
    <h2>Öneri ve Geri Bildirim</h2>
    <form action="mailto:rotalinkinfo@gmail.com" method="post" enctype="text/plain">
        <div class="form-group">
            <label for="kategori">Öneri Kategorisi</label>
            <select id="kategori" name="Kategori" required>
                <option value="" disabled selected>Kategori seçin...</option>
                <option value="Yeni Tesis Onerisi">Yeni Tesis Önerisi</option>
                <option value="Yeni Gezi Yeri Onerisi">Yeni Gezi Yeri Önerisi</option>
                <option value="Yeni Yemek Mekani Onerisi">Yeni Yemek Mekanı Önerisi</option>
                <option value="Yeni Sosyal Alan Onerisi">Yeni Sosyal Alan Önerisi</option>
                <option value="Mevcut Bilgide Hata">Mevcut Bilgide Hata Bildirimi</option>
                <option value="Diger">Diğer Görüş ve Öneriler</option>
            </select>
        </div>
        <div class="form-group">
            <label for="sehir">Şehir</label>
            <input type="text" id="sehir" name="Sehir" placeholder="örn. Kayseri" required>
        </div>
        <div class="form-group">
            <label for="yer_adi">Yer Adı / Konu</label>
            <input type="text" id="yer_adi" name="Yer_Adi" placeholder="örn. Erciyes Kayak Merkezi" required>
        </div>
        <div class="form-group">
            <label for="aciklama">Açıklama / Detaylar</label>
            <textarea id="aciklama" name="Aciklama" placeholder="Konum, telefon, web sitesi gibi detayları veya geri bildiriminizi yazın..." required></textarea>
        </div>
        <div class="form-group">
            <label for="email">E-posta Adresiniz (İsteğe Bağlı)</label>
            <input type="email" id="email" name="Gonderen_Eposta" placeholder="Geri dönüş yapmamızı isterseniz...">
        </div>
        <button type="submit" class="btn-submit">Öneriyi Gönder</button>
        <p class="form-info">Bu form, önerinizi e-posta programınız aracılığıyla gönderecektir.</p>
    </form>
  </section>

  <footer>
    <div>© <span id="yil"></span> RotaLink</div>
    <div class="footer-links">
        <a href="#" id="footerAnasayfa">Anasayfa</a>
        <a href="https://docs.google.com/document/d/1_AsP4bDt7BuKebFhpLY-657rf31Bmy_hi-57zYo2jgU/edit?tab=t.0" target="_blank" rel="noopener noreferrer">Gizlilik Politikası</a>
        <a href="mailto:rotalinkinfo@gmail.com">İletişim</a>
    </div>
  </footer>
</div>

<a href="#" id="scrollTopBtn" title="Yukarı Çık">↑</a>

<script>
document.getElementById('yil').textContent = new Date().getFullYear();

const S = {ready:false,data:[],gezi:[],yemek:[],sosyal:[],citySet:new Set(), sortedCities: []};
async function loadAll(){
  if(S.ready) return;
  const files = ['data.json','gezi.json','yemek.json','sosyal.json'];
  const [d,g,y,s] = await Promise.all(files.map(f=>fetch(f,{cache:'no-store'}).then(r=>r.ok?r.json():[]).catch(()=>[])));
  S.data=d; S.gezi=g; S.yemek=y; S.sosyal=s; S.ready=true;
  
  [...d,...g,...y,...s].forEach(it=>{ if(it && it.il) S.citySet.add(it.il.trim()); });
  S.sortedCities = [...S.citySet].sort((a,b)=>a.localeCompare(b,'tr'));
}

const qEl = document.getElementById('q');
const clearBtn = document.getElementById('clearBtn');
const tabsBar = document.getElementById('tabs');
const tabBtns = [...document.querySelectorAll('.tab')];
const suggestionsEl = document.getElementById('suggestions');

function phoneHref(t){ const d=String(t||'').replace(/[^0-9+]/g,''); return d?`tel:${d}`:''; }
function createMapSearchUrl(query) { return `https://www.google.com/maps/search/?api=1&query=$${encodeURIComponent(query)}`; }
function createMapNavigateUrl(lat, lng) { return `https://www.google.com/maps?q=$${lat},${lng}`; }
function googleImageHref(isim, il){
  const query = encodeURIComponent((isim||'') + ' ' + (il||''));
  return `https://www.google.com/search?tbm=isch&q=${query}`;
}

function mountList(el, items, type){
  el.innerHTML = '';
  if(!items || !items.length){ el.innerHTML = '<div class="empty">Sonuç yok.</div>'; return; }
  const list = document.createElement('div'); list.className='list';
  items.forEach(it=>{
    const row = document.createElement('div'); row.className='item';
    const info = document.createElement('div'); info.className = 'info';
    const title = document.createElement('div'); title.className='title'; title.textContent = it.isim || 'İsimsiz';
    info.appendChild(title);
    if (['gezi', 'yemek', 'sosyal'].includes(type) && it.aciklama) {
      const desc = document.createElement('div'); desc.className = 'desc'; desc.textContent = it.aciklama;
      info.appendChild(desc);
    }
    const acts = document.createElement('div'); acts.className='actions';
    
    if(type==='tesis'){
      const tel = phoneHref(it.telefon);
      const mapsUrl = (it.latitude && it.longitude)
        ? createMapNavigateUrl(it.latitude, it.longitude)
        : createMapSearchUrl(`${it.isim || ''} ${it.il || ''}`);
      
      acts.innerHTML =
        (tel?`<a class="btn call" href="${tel}">Ara</a>`:`<button class="btn" disabled>Telefon yok</button>`) +
        `<button class="btn share" onclick='navigator.share?navigator.share({title:"${(it.isim||'Konum').replace(/"/g,'\\"')}",url:"${mapsUrl}"}) : navigator.clipboard.writeText("${mapsUrl}")'>Paylaş</button>`+
        `<a class="btn go" href="${mapsUrl}" target="_blank" rel="noopener">Git</a>`;
    } else {
      let url = '';
      switch(type) {
        case 'gezi': url = createMapSearchUrl(`${it.isim || ''} ${it.il || ''}`); break;
        case 'yemek': url = googleImageHref(it.isim, it.il); break;
        case 'sosyal': url = createMapSearchUrl(`${it.isim || ''} ${it.il || ''}`); break;
        default: url = `https://www.google.com/search?q=${encodeURIComponent((it.isim||'')+' '+(it.il||''))}`; break;
      }
      acts.innerHTML = `<a class="btn view" href="${url}" target="_blank" rel="noopener">İncele</a>`;
    }
    row.appendChild(info); row.appendChild(acts); list.appendChild(row);
  });
  el.appendChild(list);
}

function activate(tabName){
  tabBtns.forEach(b=>b.classList.toggle('active', b.dataset.tab===tabName));
  ['tesis','gezi','yemek','sosyal'].forEach(name=>{
    const el = document.getElementById('tab-'+name);
    el.classList.toggle('active', name===tabName);
  });
}

tabBtns.forEach(b=>b.addEventListener('click', ()=>activate(b.dataset.tab)));
function hideSuggestions() { suggestionsEl.style.display = 'none'; suggestionsEl.innerHTML = ''; }

async function run(){
  await loadAll();
  const q = qEl.value.trim().toLowerCase();
  if(!q){
    tabsBar.style.display='none';
    ['tab-tesis','tab-gezi','yemek','sosyal'].forEach(id=>{
      const el=document.getElementById('tab-'+id); el.innerHTML='<div class="empty">Aramak için bir şehir adı yazın.</div>'; el.classList.remove('active');
    });
    tabBtns.forEach(b=>b.classList.remove('active'));
    return;
  }
  
  const f = x => (x.il||'').toLowerCase() === q;
  mountList(document.getElementById('tab-tesis'), S.data.filter(f), 'tesis');
  mountList(document.getElementById('tab-gezi'), S.gezi.filter(f), 'gezi');
  mountList(document.getElementById('tab-sosyal'), S.sosyal.filter(f), 'sosyal');

  const cityYemekObject = S.yemek.find(f);
  let yemekList = [];
  if (cityYemekObject && cityYemekObject.yemekler) {
      yemekList = cityYemekObject.yemekler.map(yemek => ({...yemek, il: cityYemekObject.il }));
  }
  mountList(document.getElementById('tab-yemek'), yemekList, 'yemek');
  
  tabsBar.style.display='flex';
  if(!document.querySelector('.tab.active')){ activate('tesis'); }
}

function updateSuggestions() {
    const value = qEl.value.trim().toLowerCase();
    if (!value) { hideSuggestions(); return; }
    const matchedCities = S.sortedCities.filter(city => city.toLowerCase().startsWith(value)).slice(0, 10);
    if (matchedCities.length > 0) {
        suggestionsEl.innerHTML = matchedCities.map(city => `<div class="suggestion-item">${city}</div>`).join('');
        suggestionsEl.style.display = 'block';
    } else { hideSuggestions(); }
}

qEl.addEventListener('input', updateSuggestions);
qEl.addEventListener('keydown', (e) => { if (e.key === 'Enter') { hideSuggestions(); run(); } });
clearBtn.addEventListener('click', ()=>{ qEl.value=''; qEl.focus(); hideSuggestions(); run(); });
suggestionsEl.addEventListener('click', (e) => {
    if (e.target.classList.contains('suggestion-item')) {
        qEl.value = e.target.textContent;
        hideSuggestions();
        run();
    }
});
document.addEventListener('click', (e) => { if (!e.target.closest('.inputwrap')) { hideSuggestions(); } });

// --- YENİ: "YUKARI ÇIK" BUTONU VE FOOTER ANASAYFA LİNKİ İÇİN KOD ---
const scrollTopBtn = document.getElementById('scrollTopBtn');
const footerAnasayfaLink = document.getElementById('footerAnasayfa');

// Butonun görünürlüğünü kontrol et
window.onscroll = function() {
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
    scrollTopBtn.style.display = "block";
  } else {
    scrollTopBtn.style.display = "none";
  }
};

// Yumuşak kaydırma fonksiyonu
function scrollToTop(e) {
  e.preventDefault();
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Butonlara tıklama olaylarını ata
scrollTopBtn.addEventListener('click', scrollToTop);
footerAnasayfaLink.addEventListener('click', scrollToTop);

loadAll();
</script>
</body>
</html>
