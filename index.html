<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rotalink Gezi Rehberi</title>
<meta name="theme-color" content="#f7faff" />
<style>
:root{
  --bg:#f7faff;--card:#fff;--text:#0f172a;--mut:#475569;--bd:#e2e8f0;
  --b1:#0ea5e9;--b2:#22d3ee;--ok:#22c55e;--go:#10b981;--warn:#f59e0b;
  --share1:#a78bfa;--share2:#f472b6
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto;scroll-behavior: smooth;}
a{text-decoration:none;color:inherit}
.container{max-width:1100px;margin:auto;padding:18px}
header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 16px 18px;
    background:rgba(255,255,255,0.85);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    position: sticky;
    top: 0;
    z-index: 100;
    width: 100%;
}
.logo{display:flex;gap:12px;align-items:center;font-weight:800; font-size: 18px;}
.logo-amblem {
    width: 32px;
    height: 32px;
    border-radius: 8px;
}
nav{display:flex;gap:24px;color:var(--mut)}
nav a {
    font-weight: 600;
    transition: color 0.2s ease;
}
nav a:hover {
    color: var(--b1);
}
.menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    position: relative;
}
.menu-toggle .line {
    display: block;
    width: 100%;
    height: 2px;
    background: var(--text);
    position: absolute;
    left: 0;
    transition: all 0.3s ease;
}
.menu-toggle .line1 { top: 4px; }
.menu-toggle .line2 { top: 11px; }
.menu-toggle .line3 { top: 18px; }
.menu-toggle.open .line1 { transform: translateY(7px) rotate(45deg); }
.menu-toggle.open .line2 { opacity: 0; }
.menu-toggle.open .line3 { transform: translateY(-7px) rotate(-45deg); }
.card{background:var(--card);border:1px solid var(--bd);border-radius:12px;padding:16px; margin-top: 16px;}
.hero.card {
    display: grid; grid-template-columns: 1fr 1fr; align-items: center;
    gap: 32px; padding: 32px;
}
.hero-text h1 { margin: 0 0 12px; font-size: 32px; line-height: 1.3; font-weight: 800; }
.hero-text p {
    margin: 0 0 16px;
    color: var(--mut);
    font-size: 17px;
    line-height: 1.7;
}
.hero-text p:last-of-type {
    margin-bottom: 24px;
}
.hero-text .text-highlight {
    color: var(--b1);
    font-weight: 600;
}
.hero-text strong {
    color: var(--text);
}
.hero-image { text-align: center; }
.hero-image .app-logo {
    max-width: 450px;
    max-height: 450px;
    height: auto;
    filter: drop-shadow(0px 10px 20px rgba(0, 0, 0, 0.15));
    border-radius: 25px;
}
.btn-store-new {
    display: inline-flex; align-items: center; gap: 12px; padding: 8px 20px;
    border-radius: 10px; background: #0f172a; color: #fff;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.btn-store-new:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.btn-store-new .icon { width: 28px; height: 28px; }
.btn-store-new .text-wrap { display: flex; flex-direction: column; align-items: flex-start; line-height: 1.2; }
.btn-store-new .text-label { font-size: 12px; opacity: 0.8; }
.btn-store-new .text-store { font-size: 18px; font-weight: 600; }
.search-hero {
    padding: 48px 24px;
    text-align: center;
    background: #e0f2fe;
    border-radius: 12px;
    margin-top: 16px;
}
.search-hero h2 {
    font-size: 32px;
    font-weight: 800;
    margin-top: 0;
    margin-bottom: 24px;
    color: var(--text);
}
.search-wrapper {
    position: relative;
    max-width: 700px;
    margin: auto;
}
.inputwrap{
  position:relative; display: flex; align-items: center;
  border-radius: 28px;
  background: var(--card);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  border: 2px solid var(--bd);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}
.inputwrap:focus-within {
  border-color: var(--b1);
  box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2), 0 4px 20px rgba(0,0,0,0.1);
}
.search-icon { position: absolute; left: 20px; color: #94a3b8; width: 22px; height: 22px; transition: color 0.3s; z-index: 2;}
.inputwrap:focus-within .search-icon { color: var(--b1); }
#q {
  width:100%; padding: 16px 120px 16px 56px;
  border-radius:28px; border:0;
  background: transparent; outline: none; font-size: 18px; color: var(--text);
  position: relative;
  z-index: 1;
}
#q::placeholder {
  color: #94a3b8;
  transition: opacity 0.3s ease;
}
.typing-container {
    position: absolute;
    left: 56px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    color: #94a3b8;
    pointer-events: none;
    z-index: 0;
}
@keyframes blink {
    50% { opacity: 0; }
}
.clearbtn{
  position:absolute; right: 105px;
  top:50%; transform:translateY(-50%); border:0; background:#eef2f7;
  width:32px; height:32px; border-radius:50%; font-weight:900; color:#334155;
  cursor:pointer; display: grid; place-items: center; transition: background-color 0.2s;
  z-index: 2;
}
.clearbtn:hover { background-color: #dde4ed; }
.search-btn {
    position: absolute;
    right: 6px;
    top: 6px;
    bottom: 6px;
    border: none;
    border-radius: 22px;
    padding: 0 24px;
    font-size: 16px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--b1), var(--b2));
    color: #fff;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    z-index: 2;
}
.search-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
}
#suggestions {
  display: none; position: absolute; top: calc(100% + 8px); left: 0; right: 0; text-align: left;
  background: var(--card); border: 1px solid var(--bd); border-radius: 16px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1); max-height: 250px; overflow-y: auto; z-index: 10;
}
.suggestion-item { padding: 12px 20px; cursor: pointer; font-size: 16px; }
.suggestion-item:hover { background-color: #f1f5f9; }
.tabs{margin-top:24px;border-bottom:1px solid var(--bd);display:flex;gap:6px;flex-wrap:wrap}
.tab{padding:8px 14px;border:1px solid var(--bd);border-bottom:0;border-radius:10px 10px 0 0;background:#f8fafc;color:var(--mut);cursor:pointer;font-weight:700; transition: all 0.2s ease-in-out;}
.tab:hover { background: #fff; color: var(--text); }
.tab.active { color: #fff; }
.tab.active[data-tab="tesis"]  { background: var(--b1); border-color: var(--b1); }
.tab.active[data-tab="gezi"]   { background: var(--go); border-color: var(--go); }
.tab.active[data-tab="yemek"]  { background: var(--warn); border-color: var(--warn); }
.tab.active[data-tab="sosyal"] { background: var(--share1); border-color: var(--share1); }
.tabcontent {display:none;padding:12px;border:1px solid var(--bd);border-top-width: 3px;border-radius:0 0 12px 12px;background:#fff}
.tabcontent.active { display:block; }
#tab-tesis.active  { border-top-color: var(--b1); }
#tab-gezi.active   { border-top-color: var(--go); }
#tab-yemek.active  { border-top-color: var(--warn); }
#tab-sosyal.active { border-top-color: var(--share1); }
.list{display:grid;gap:10px}
.item{border:1px solid var(--bd);border-radius:10px;padding:10px;background:#fff;display:flex;align-items:center;justify-content:space-between;gap:12px;transition: transform 0.2s ease, box-shadow 0.2s ease;}
.item:hover {transform: scale(1.02);box-shadow: 0 4px 15px rgba(0,0,0,0.08);}
.info{flex:1;min-width:160px;}
.title{font-weight:700;font-size:15px;}
.desc{font-size:14px; color:var(--mut); margin-top:2px; line-height:1.4;}
.actions{display:flex;gap:8px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:8px 12px;border-radius:10px;border:0;font-weight:800;font-size:14px;color:#0b1320;background:#f1f5f9}
.btn.call{background:linear-gradient(135deg,#38bdf8,#22d3ee);color:#00131a}
.btn.share{background:linear-gradient(135deg,var(--share1),var(--share2));color:#fff}
.btn.go{background:linear-gradient(135deg,#34d399,#22c55e);color:#0b1320}
.btn.view{background:linear-gradient(135deg,#fde68a,var(--warn));color:#111827}
.empty{color:var(--mut);font-size:13px}
.contact-card { padding: 24px; }
.contact-card h2 { margin-top: 0; font-size: 24px; }
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-weight: 600; margin-bottom: 6px; font-size: 15px; }
.form-group input, .form-group select, .form-group textarea {width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--bd);background: #f8fafc; font-size: 16px; font-family: inherit;transition: border-color 0.2s, box-shadow 0.2s;}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus {outline: none; border-color: var(--b1); background: #fff; box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.15);}
textarea { resize: vertical; min-height: 120px; }
.btn-submit {width: 100%; padding: 14px; font-size: 16px; font-weight: 800;border: 0; border-radius: 10px; background: linear-gradient(135deg, var(--go), var(--ok));color: #fff; cursor: pointer; transition: opacity 0.2s;}
.btn-submit:hover { opacity: 0.9; }
.form-info { font-size: 13px; color: var(--mut); text-align: center; margin-top: 12px; }
footer{margin-top:32px; padding-top:14px; border-top:1px solid var(--bd);color:var(--mut); display:flex; justify-content:space-between;flex-wrap:wrap; gap:12px; align-items: center; font-size: 14px;}
.footer-links { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
.footer-links a { transition: color 0.2s; }
.footer-links a:hover { color: var(--text); }

/* --- G√úNCELLENMƒ∞≈û Y√úZEN BUTON GRUBU --- */
.fixed-action-buttons {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 98;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}
#scrollTopBtn {
    position: relative; /* Sabit pozisyonu ana kapsayƒ±cƒ±dan alacak */
    display: none;
    border: none; outline: none; background-color: var(--b1); color: white;
    cursor: pointer; padding: 0; border-radius: 50%; width: 48px; height: 48px;
    font-size: 24px; line-height: 48px; text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: opacity 0.3s, visibility 0.3s, background-color 0.2s;
}
#scrollTopBtn:hover { background-color: var(--b2); }
.fab-container {
    position: relative;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
}
.fab-main {
    width: 56px; height: 56px; border-radius: 50%;
    background: linear-gradient(135deg, var(--b1), var(--b2));
    color: white; font-size: 36px; line-height: 56px; text-align: center;
    border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    cursor: pointer; transition: transform 0.3s ease;
}
.fab-container.open .fab-main { transform: rotate(45deg); }
.fab-options {
    display: flex; flex-direction: column;
    align-items: flex-end; /* Yazƒ±larƒ± ve ikonlarƒ± saƒüa hizala */
    list-style: none; padding: 0; margin: 0 0 16px 0;
    opacity: 0; transform: translateY(10px);
    transition: all 0.2s ease;
    pointer-events: none;
}
.fab-container.open .fab-options {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}
.fab-option {
    margin-bottom: 12px;
    display: flex;
    align-items: center;
}
.fab-option .label {
    background: white; padding: 6px 12px; border-radius: 8px;
    margin-right: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    font-weight: 600; font-size: 14px;
    opacity: 0; transform: translateX(10px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    white-space: nowrap;
}
.fab-container.open .fab-option .label {
    opacity: 1;
    transform: translateX(0);
}
.fab-option:nth-child(1) .label { transition-delay: 0.2s; }
.fab-option:nth-child(2) .label { transition-delay: 0.1s; }
.fab-option:nth-child(3) .label { transition-delay: 0s; }
.fab-option .icon {
    width: 48px; height: 48px; border-radius: 50%;
    background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    display: grid; place-items: center; font-size: 24px;
    flex-shrink: 0;
}

@media (max-width: 900px){
    .hero.card { grid-template-columns: 1fr; }
    .hero-image { display: none; }
    .hero-card { padding: 24px; text-align: center; }
    .hero-text h1 { font-size: 28px; }
    .btn-store-new { margin: auto; }
}
@media (max-width: 768px) {
    .menu-toggle { display: block; }
    nav { display: none; position: absolute; top: 100%; left: 0; right: 0; background: #fff; flex-direction: column; padding: 10px 18px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); border-top: 1px solid var(--bd); }
    nav.nav-open { display: flex; }
    nav a { padding: 12px 0; }
}
@media(max-width:600px){
    .item{flex-direction:column;align-items:flex-start}
    .actions{width:100%; margin-top: 8px;}
    footer { flex-direction: column; text-align: center; }
    .fixed-action-buttons { right: 15px; bottom: 15px; }
}
</style>
</head>
<body>
<div class="body-wrapper">
  <header>
    <div class="logo">
      <img src="amblem.png" alt="Rotalink Amblem" class="logo-amblem">
      <span>Rotalink Gezi Rehberi</span>
    </div>
    <nav id="main-nav">
        <a href="#sehirara">≈ûehir Ara</a>
        <a href="#ozellikler">√ñzellikler</a>
        <a href="#indir">ƒ∞ndir</a>
        <a href="#iletisim">ƒ∞leti≈üim</a>
    </nav>
    <button class="menu-toggle" id="menu-toggle">
        <span class="line line1"></span>
        <span class="line line2"></span>
        <span class="line line3"></span>
    </button>
  </header>

<div class="container">

  <section class="search-hero" id="sehirara">
    <h2>≈ûehri Ke≈üfetmeye Ba≈üla</h2>
    <div class="search-wrapper">
        <div class="inputwrap">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6.007,6.007,0,0,0,10,4Z"/><path d="M21,22a1,1,0,0,1-.707-0.293l-4-4a1,1,0,0,1,1.414-1.414l4,4A1,1,0,0,1,21,22Z"/></svg>
            <div class="typing-container"></div>
            <input id="q" placeholder="" autocomplete="off" />
            <button class="clearbtn" id="clearBtn" title="Temizle" style="display: none;">√ó</button>
            <button class="search-btn" id="searchBtn">Bul</button>
        </div>
        <div id="suggestions"></div>
      </div>
  </section>

  <div class="tabs" id="tabs" style="display:none">
    <div class="tab" data-tab="tesis">Tesis</div>
    <div class="tab" data-tab="gezi">Gezi</div>
    <div class="tab" data-tab="yemek">Yemek</div>
    <div class="tab" data-tab="sosyal">Sosyal</div>
  </div>
  <div class="tabcontent" id="tab-tesis"><div class="empty">Sonu√ß yok.</div></div>
  <div class="tabcontent" id="tab-gezi"><div class="empty">Sonu√ß yok.</div></div>
  <div class="tabcontent" id="tab-yemek"><div class="empty">Sonu√ß yok.</div></div>
  <div class="tabcontent" id="tab-sosyal"><div class="empty">Sonu√ß yok.</div></div>

  <section class="hero card" id="ozellikler">
      <div class="hero-text">
        <h1>RotaLink ile ≈üehirde en doƒüru noktaya tek dokunu≈ü.</h1>
        <p><span class="text-highlight">Ordu evleri, polis evleri, √∂ƒüretmenevleri</span> gibi pek √ßok kamu misafirhanesini tek ekranda ke≈üfedin. T√ºrkiye‚Äônin d√∂rt bir yanƒ±ndaki <span class="text-highlight">sosyal tesisler</span>, uygun fiyatlƒ± konaklama imk√¢nlarƒ±, lezzetli yemekler ve dinlenme alanlarƒ± artƒ±k elinizin altƒ±nda.</p>
        <p><strong>Arayƒ±n</strong>, tek dokunu≈üla tesis yetkililerine ula≈üƒ±n. <strong>Payla≈ü</strong>, bilgileri kolayca sevdiklerinize iletin. <strong>Konum</strong>, yol tarifini a√ßarak dilediƒüiniz noktaya zahmetsizce ula≈üƒ±n.</p>
        <p>RotaLink sayesinde hem ≈üehir i√ßi seyahatlerinizde hem de i≈ü ve tatil yolculuklarƒ±nƒ±zda <span class="text-highlight">g√ºvenilir kamu tesislerine</span> kolayca eri≈üin.</p>
        <a class="btn-store-new" id="indir" href="https://play.google.com/store/apps/details?id=com.serdarza.rotalink" target="_blank" rel="noopener">
            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M18.39,5.42,12,2,5.61,5.42,5.58,5.44A10.6,10.6,0,0,0,2,15.21,1,1,0,0,0,3,16H3a1,1,0,0,0,.92-.63,8.6,8.6,0,0,1,16.16,0A1,1,0,0,0,21,16h0a1,1,0,0,0,1-0.79A10.6,10.6,0,0,0,18.42,5.44ZM4.1,14.42a8.62,8.62,0,0,1,1.52-5.3L9.4,12.29,4.51,13.71A1,1,0,0,0,4.1,14.42Zm1.61-6.6-4-2.31L12,2l8.29,3.51-4,2.31L12,5.51ZM14.6,9.12l3.78-2.18a8.62,8.62,0,0,1,1.52,5.3,1,1,0,0,0-.41.71L14.6,12.29Z"/></svg>
            <div class="text-wrap">
              <span class="text-label">HEMEN ƒ∞NDƒ∞R</span>
              <span class="text-store">Google Play</span>
            </div>
          </a>
      </div>
      <div class="hero-image">
        <img src="logo.png" alt="RotaLink Uygulama Logosu" class="app-logo">
      </div>
  </section>

  <section class="card contact-card" id="iletisim">
    <h2>√ñneri ve Geri Bildirim</h2>
    <form action="mailto:rotalinkinfo@gmail.com" method="post" enctype="text/plain">
       <div class="form-group"><label for="kategori">√ñneri Kategorisi</label><select id="kategori" name="Kategori" required><option value="" disabled selected>Kategori se√ßin...</option><option value="Yeni Tesis Onerisi">Yeni Tesis √ñnerisi</option><option value="Yeni Gezi Yeri Onerisi">Yeni Gezi Yeri √ñnerisi</option><option value="Yeni Yemek Mekani Onerisi">Yeni Yemek Mekanƒ± √ñnerisi</option><option value="Yeni Sosyal Alan Onerisi">Yeni Sosyal Alan √ñnerisi</option><option value="Mevcut Bilgide Hata">Mevcut Bilgide Hata Bildirimi</option><option value="Diger">Diƒüer G√∂r√º≈ü ve √ñneriler</option></select></div>
       <div class="form-group"><label for="sehir">≈ûehir</label><input type="text" id="sehir" name="Sehir" placeholder="√∂rn. Kayseri" required></div>
       <div class="form-group"><label for="yer_adi">Yer Adƒ± / Konu</label><input type="text" id="yer_adi" name="Yer_Adi" placeholder="√∂rn. Erciyes Kayak Merkezi" required></div>
       <div class="form-group"><label for="aciklama">A√ßƒ±klama / Detaylar</label><textarea id="aciklama" name="Aciklama" placeholder="Konum, telefon, web sitesi gibi detaylarƒ± veya geri bildiriminizi yazƒ±n..." required></textarea></div>
       <div class="form-group"><label for="email">E-posta Adresiniz (ƒ∞steƒüe Baƒülƒ±)</label><input type="email" id="email" name="Gonderen_Eposta" placeholder="Geri d√∂n√º≈ü yapmamƒ±zƒ± isterseniz..."></div>
       <button type="submit" class="btn-submit">√ñneriyi G√∂nder</button>
       <p class="form-info">Bu form, √∂nerinizi e-posta programƒ±nƒ±z aracƒ±lƒ±ƒüƒ±yla g√∂nderecektir.</p>
    </form>
  </section>

  <footer id="footer">
    <div>¬© <span id="yil"></span> Rotalink Gezi Rehberi</div>
    <div class="footer-links"><a href="#" id="footerAnasayfa">Anasayfa</a><a href="https://docs.google.com/document/d/1_AsP4bDt7BuKebFhpLY-657rf31Bmy_hi-57zYo2jgU/edit?tab=t.0" target="_blank" rel="noopener noreferrer">Gizlilik Politikasƒ±</a><a href="mailto:rotalinkinfo@gmail.com">ƒ∞leti≈üim</a></div>
  </footer>
</div>
</div>

<div class="fixed-action-buttons" id="fixed-action-buttons" style="display: none;">
    <div class="fab-container" id="fab-container">
        <div class="fab-options" id="fab-options">
            <a href="#" id="fab-history" class="fab-option" target="_blank" rel="noopener">
                <span class="label">Tarih√ße</span>
                <span class="icon">üìú</span>
            </a>
            <a href="#" id="fab-pharmacy" class="fab-option" target="_blank" rel="noopener">
                <span class="label">N√∂bet√ßi Eczane</span>
                <span class="icon">üåô</span>
            </a>
            <a href="#" id="fab-weather" class="fab-option" target="_blank" rel="noopener">
                <span class="label">Hava Durumu</span>
                <span class="icon">‚òÄÔ∏è</span>
            </a>
        </div>
        <button class="fab-main" id="fab-main">+</button>
    </div>
    <a href="#" id="scrollTopBtn" title="Yukarƒ± √áƒ±k">‚Üë</a>
</div>

<script>
const menuToggle = document.getElementById('menu-toggle');
const mainNav = document.getElementById('main-nav');
menuToggle.addEventListener('click', () => {
    mainNav.classList.toggle('nav-open');
    menuToggle.classList.toggle('open');
});
const navLinks = mainNav.querySelectorAll('a');
navLinks.forEach(link => {
    link.addEventListener('click', () => {
        mainNav.classList.remove('nav-open');
        menuToggle.classList.remove('open');
    });
});

document.getElementById('yil').textContent = new Date().getFullYear();
const S = {ready:false,data:[],gezi:[],yemek:[],sosyal:[],citySet:new Set(), sortedCities: []};
async function loadAll(){
  if(S.ready) return;
  const files = ['data.json','gezi.json','yemek.json','sosyal.json'];
  const [d,g,y,s] = await Promise.all(files.map(f=>fetch(f,{cache:'no-store'}).then(r=>r.ok?r.json():[]).catch(()=>[])));
  S.data=d; S.gezi=g; S.yemek=y; S.sosyal=s; S.ready=true;
  [...d,...g,...y,...s].forEach(it=>{ if(it && it.il) S.citySet.add(it.il.trim()); });
  S.sortedCities = [...S.citySet].sort((a,b)=>a.localeCompare(b,'tr'));
}
const qEl = document.getElementById('q');
const clearBtn = document.getElementById('clearBtn');
const searchBtn = document.getElementById('searchBtn');
const tabsBar = document.getElementById('tabs');
const tabBtns = [...document.querySelectorAll('.tab')];
const suggestionsEl = document.getElementById('suggestions');
const typingContainer = document.querySelector('.typing-container');
const placeholderTexts = ["ƒ∞stediƒüiniz ≈üehri yazƒ±n...", "√∂rn. D√ºzce"];
let textIndex = 0;
let charIndex = 0;
function type() {
    if (charIndex < placeholderTexts[textIndex].length) {
        typingContainer.textContent += placeholderTexts[textIndex].charAt(charIndex);
        charIndex++;
        setTimeout(type, 100);
    } else {
        setTimeout(erase, 2000);
    }
}
function erase() {
    if (charIndex > 0) {
        typingContainer.textContent = placeholderTexts[textIndex].substring(0, charIndex - 1);
        charIndex--;
        setTimeout(erase, 50);
    } else {
        textIndex = (textIndex + 1) % placeholderTexts.length;
        setTimeout(type, 500);
    }
}
document.addEventListener('DOMContentLoaded', type);
qEl.addEventListener('focus', () => { typingContainer.style.display = 'none'; });
qEl.addEventListener('blur', () => { if(!qEl.value) typingContainer.style.display = 'block'; });

const fabContainer = document.getElementById('fab-container');
const fabMain = document.getElementById('fab-main');
const fabWeather = document.getElementById('fab-weather');
const fabPharmacy = document.getElementById('fab-pharmacy');
const fabHistory = document.getElementById('fab-history');

fabMain.addEventListener('click', () => {
    fabContainer.classList.toggle('open');
});

function convertToUrlSlug(text) {
    if (!text) return '';
    const trMap = { '√ß':'c', 'ƒü':'g', 'ƒ±':'i', '√∂':'o', '≈ü':'s', '√º':'u', 'ƒ∞': 'i' };
    return text.toLowerCase().replace(/[√ßƒüƒ±√∂≈ü√ºƒ∞]/g, char => trMap[char]);
}

function updateFabLinks(cityName) {
    const cityNameSlug = convertToUrlSlug(cityName);
    const capitalizedCityName = cityName.charAt(0).toUpperCase() + cityName.slice(1);
    
    fabWeather.href = `https://www.mgm.gov.tr/tahmin/il-ve-ilceler.aspx?il=${capitalizedCityName}`;
    fabPharmacy.href = `https://www.eczaneler.gen.tr/nobetci-${cityNameSlug}`;
    fabHistory.href = `https://tr.wikipedia.org/wiki/${capitalizedCityName}`;
}

function isAppleDevice() { return /iPhone|iPad|iPod/.test(navigator.platform); }

function handleShare(btn) {
    const isim = btn.dataset.isim;
    const il = btn.dataset.il;
    const telefon = btn.dataset.telefon;
    const shareMapsUrl = createMapSearchUrl(`${isim || ''} ${il || ''}`);
    const shareText = `${isim}\n${shareMapsUrl}\n\nTelefon Numarasƒ±: ${telefon || 'Belirtilmemi≈ü'}\n\nRotalink Gezi Rehberi'ne bu linkten ula≈üabilirsiniz:\nhttps://serdarza.github.io/rotalinkgezirehberi/`;
    if (navigator.share) {
        navigator.share({ text: shareText }).catch(err => console.error("Payla≈üƒ±m hatasƒ±:", err));
    } else {
        navigator.clipboard.writeText(shareText)
            .then(() => alert("Payla≈üƒ±m metni panoya kopyalandƒ±!"))
            .catch(err => console.error("Kopyalama hatasƒ±:", err));
    }
}

function phoneHref(t){ const d=String(t||'').replace(/[^0-9+]/g,''); return d?`tel:${d}`:''; }

function createMapSearchUrl(query) {
    if (isAppleDevice()) { return `https://www.google.com/maps/search/?api=1&query=$$3{encodeURIComponent(query)}`; }
    return `https://www.google.com/maps/search/?api=1&query=$$4{encodeURIComponent(query)}`;
}
function createMapNavigateUrl(lat, lng) {
    if (isAppleDevice()) { return `https://www.google.com/maps/search/?api=1&query=$$5{lat},${lng}`; }
    return `https://www.google.com/maps/search/?api=1&query=$$6{lat},${lng}`;
}
function googleImageHref(isim, il){
  const query = encodeURIComponent((isim||'') + ' ' + (il||''));
  return `https://www.google.com/search?tbm=isch&q=${query}`;
}
function mountList(el, items, type){
  el.innerHTML = '';
  if(!items || !items.length){ el.innerHTML = '<div class="empty">Sonu√ß yok.</div>'; return; }
  const list = document.createElement('div'); list.className='list';
  items.forEach(it=>{
    const row = document.createElement('div'); row.className='item';
    const info = document.createElement('div'); info.className = 'info';
    const title = document.createElement('div'); title.className='title'; title.textContent = it.isim || 'ƒ∞simsiz';
    info.appendChild(title);
    if ((['gezi', 'yemek', 'sosyal'].includes(type) || type === 'tesis') && it.aciklama) {
      const desc = document.createElement('div'); desc.className = 'desc'; desc.textContent = it.aciklama;
      info.appendChild(desc);
    }
    const acts = document.createElement('div'); acts.className='actions';
    if(type==='tesis'){
      const tel = phoneHref(it.telefon);
      const mapsUrl = createMapSearchUrl(`${it.isim || ''}`);
      const shareButtonHTML = `<button class="btn share" data-isim="${it.isim || ''}" data-il="${it.il || ''}" data-telefon="${it.telefon || ''}" onclick="handleShare(this)">Payla≈ü</button>`;
      acts.innerHTML = (tel?`<a class="btn call" href="${tel}">Ara</a>`:`<button class="btn" disabled>Telefon yok</button>`) + shareButtonHTML + `<a class="btn go" href="${mapsUrl}" target="_blank" rel="noopener">Konum</a>`;
    } else {
      let url = '';
      switch(type) {
        case 'gezi': url = createMapSearchUrl(`${it.il || ''} ${it.isim || ''}`); break;
        case 'yemek': url = googleImageHref(it.isim, it.il); break;
        case 'sosyal': const sosyalQuery = `${it.ilce || ''} ${it.belediye || ''} ${it.isim || ''}`.trim(); url = createMapSearchUrl(sosyalQuery); break;
        default: url = `https://www.google.com/search?q=${encodeURIComponent((it.isim||'')+' '+(it.il||''))}`; break;
      }
      acts.innerHTML = `<a class="btn view" href="${url}" target="_blank" rel="noopener">ƒ∞ncele</a>`;
    }
    row.appendChild(info); row.appendChild(acts); list.appendChild(row);
  });
  el.appendChild(list);
}
function activate(tabName){
  tabBtns.forEach(b=>b.classList.toggle('active', b.dataset.tab===tabName));
  ['tesis','gezi','yemek','sosyal'].forEach(name=>{ const el = document.getElementById('tab-'+name); el.classList.toggle('active', name===tabName); });
}
tabBtns.forEach(b=>b.addEventListener('click', ()=>activate(b.dataset.tab)));
function hideSuggestions() { suggestionsEl.style.display = 'none'; suggestionsEl.innerHTML = ''; }
async function run(){
  await loadAll();
  const q = qEl.value.trim().toLowerCase();
  if(!q){
    tabsBar.style.display='none';
    fabContainer.style.display = 'none';
    ['tesis','gezi','yemek','sosyal'].forEach(id=>{
      const el=document.getElementById('tab-'+id); el.innerHTML='<div class="empty">Aramak i√ßin bir ≈üehir adƒ± yazƒ±n.</div>'; el.classList.remove('active');
    });
    tabBtns.forEach(b=>b.classList.remove('active'));
    return;
  }
  updateFabLinks(qEl.value);
  fabContainer.style.display = 'flex';
  const f = x => (x.il||'').toLowerCase() === q;
  mountList(document.getElementById('tab-tesis'), S.data.filter(f), 'tesis');
  mountList(document.getElementById('tab-gezi'), S.gezi.filter(f), 'gezi');
  mountList(document.getElementById('tab-yemek'), S.yemek.filter(f), 'yemek');
  mountList(document.getElementById('tab-sosyal'), S.sosyal.filter(f), 'sosyal');
  tabsBar.style.display='flex';
  if(!document.querySelector('.tab.active')){ activate('tesis'); }
}
function updateSuggestions() {
    const value = qEl.value.trim().toLowerCase();
    clearBtn.style.display = value ? 'grid' : 'none';
    typingContainer.style.display = value ? 'none' : 'block';
    if (!value) { hideSuggestions(); return; }
    const matchedCities = S.sortedCities.filter(city => city.toLowerCase().startsWith(value)).slice(0, 10);
    if (matchedCities.length > 0) {
        suggestionsEl.innerHTML = matchedCities.map(city => `<div class="suggestion-item">${city}</div>`).join('');
        suggestionsEl.style.display = 'block';
    } else { hideSuggestions(); }
}
qEl.addEventListener('input', updateSuggestions);
qEl.addEventListener('keydown', (e) => { if (e.key === 'Enter') { hideSuggestions(); run(); } });
clearBtn.addEventListener('click', ()=>{ qEl.value=''; qEl.focus(); hideSuggestions(); run(); updateSuggestions(); });
searchBtn.addEventListener('click', () => { hideSuggestions(); run(); });
suggestionsEl.addEventListener('click', (e) => {
    if (e.target.classList.contains('suggestion-item')) { qEl.value = e.target.textContent; hideSuggestions(); run(); updateSuggestions();}
});
document.addEventListener('click', (e) => { if (!e.target.closest('.search-wrapper')) { hideSuggestions(); } });
const scrollTopBtn = document.getElementById('scrollTopBtn');
const footerAnasayfaLink = document.getElementById('footerAnasayfa');
window.onscroll = function() {
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) { scrollTopBtn.style.display = "block"; }
  else { scrollTopBtn.style.display = "none"; }
};
function scrollToTop(e) { e.preventDefault(); window.scrollTo({top: 0, behavior: 'smooth'}); }
scrollTopBtn.addEventListener('click', scrollToTop);
footerAnasayfaLink.addEventListener('click', scrollToTop);
loadAll();
</script>
</body>
</html>
